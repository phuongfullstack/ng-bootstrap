<div class="progress-demo">
  <div class="demo-section">
    <h3>1. Basic Progress</h3>
    <p>Simple progress bar with value control</p>
    <core-progress [value]="basicProgress()" [max]="basicMax" variant="primary" [showLabel]="true">
    </core-progress>
    <div class="demo-controls">
      <core-button variant="primary" size="sm" (clicked)="decreaseBasicProgress()">-10</core-button>
      <span class="value-display">{{ basicProgress() }}%</span>
      <core-button variant="primary" size="sm" (clicked)="increaseBasicProgress()">+10</core-button>
      <core-button variant="secondary" size="sm" (clicked)="resetBasicProgress()">Reset</core-button>
    </div>
  </div>

  <div class="demo-section">
    <h3>2. Variants</h3>
    <p>Different color variants</p>
    <div class="variant-examples">
      <div class="variant-item">
        <label>Primary</label>
        <core-progress [value]="variantProgress()" variant="primary" [showLabel]="true"></core-progress>
      </div>
      <div class="variant-item">
        <label>Success</label>
        <core-progress [value]="variantProgress()" variant="success" [showLabel]="true"></core-progress>
      </div>
      <div class="variant-item">
        <label>Warning</label>
        <core-progress [value]="variantProgress()" variant="warning" [showLabel]="true"></core-progress>
      </div>
      <div class="variant-item">
        <label>Danger</label>
        <core-progress [value]="variantProgress()" variant="danger" [showLabel]="true"></core-progress>
      </div>
      <div class="variant-item">
        <label>Info</label>
        <core-progress [value]="variantProgress()" variant="info" [showLabel]="true"></core-progress>
      </div>
    </div>
    <div class="demo-controls">
      <input type="range" [value]="variantProgress()" (input)="updateVariantProgress(+($any($event.target)).value)"
        min="0" max="100" class="slider">
      <span class="value-display">{{ variantProgress() }}%</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>3. Striped Progress</h3>
    <p>Progress bar with striped pattern</p>
    <core-progress [value]="stripedProgress()" variant="success" [striped]="true" [showLabel]="true">
    </core-progress>
    <div class="demo-controls">
      <input type="range" [value]="stripedProgress()" (input)="updateStripedProgress(+($any($event.target)).value)"
        min="0" max="100" class="slider">
      <span class="value-display">{{ stripedProgress() }}%</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>4. Animated Progress</h3>
    <p>Animated striped progress bar</p>
    <core-progress [value]="animatedProgress()" variant="info" [striped]="true" [animated]="true" [showLabel]="true"
      (completed)="onCompleted()" (started)="onStarted()">
    </core-progress>
    <div class="demo-controls">
      <core-button variant="primary" size="sm" [disabled]="!!animatedInterval" (clicked)="startAnimatedProgress()">
        Start Animation
      </core-button>
      <core-button variant="danger" size="sm" [disabled]="!animatedInterval" (clicked)="stopAnimatedProgress()">
        Stop Animation
      </core-button>
      <span class="value-display">{{ animatedProgress() }}%</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>5. Custom Label</h3>
    <p>Progress bar with custom label text</p>
    <core-progress [value]="labeledProgress()" variant="warning" [showLabel]="true" [label]="customLabel || undefined">
    </core-progress>
    <div class="demo-controls">
      <input type="range" [value]="labeledProgress()" (input)="updateLabeledProgress(+($any($event.target)).value)"
        min="0" max="100" class="slider">
      <input type="text" [value]="customLabel" (input)="setCustomLabel(($any($event.target)).value)"
        placeholder="Custom label (optional)" class="text-input">
      <span class="value-display">{{ labeledProgress() }}%</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>6. Indeterminate Progress</h3>
    <p>Progress bar with indeterminate animation (no specific value)</p>
    <core-progress [indeterminate]="indeterminateActive()" variant="primary" [striped]="true" [animated]="true">
    </core-progress>
    <div class="demo-controls">
      <core-button variant="primary" size="sm" [disabled]="indeterminateActive()"
        (clicked)="indeterminateActive.set(true)">
        Start Indeterminate
      </core-button>
      <core-button variant="secondary" size="sm" [disabled]="!indeterminateActive()"
        (clicked)="indeterminateActive.set(false)">
        Stop Indeterminate
      </core-button>
    </div>
  </div>

  <div class="demo-section">
    <h3>7. Buffer Progress</h3>
    <p>Progress bar with buffer indicator (like video loading)</p>
    <core-progress [value]="bufferProgress()" [bufferValue]="bufferValue()" [buffer]="true" variant="success"
      [showLabel]="true">
    </core-progress>
    <div class="demo-controls">
      <div class="control-group">
        <label>Progress:</label>
        <input type="range" [value]="bufferProgress()" (input)="updateBufferProgress(+($any($event.target)).value)"
          min="0" max="100" class="slider">
        <span>{{ bufferProgress() }}%</span>
      </div>
      <div class="control-group">
        <label>Buffer:</label>
        <input type="range" [value]="bufferValue()" (input)="updateBufferValue(+($any($event.target)).value)" min="0"
          max="100" class="slider">
        <span>{{ bufferValue() }}%</span>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h3>8. Custom Height</h3>
    <p>Progress bars with different heights</p>
    <div class="height-examples">
      <div class="height-item">
        <label>Small (10px)</label>
        <core-progress [value]="60" variant="primary" height="10px" [showLabel]="true"></core-progress>
      </div>
      <div class="height-item">
        <label>Medium (20px)</label>
        <core-progress [value]="60" variant="success" height="20px" [showLabel]="true"></core-progress>
      </div>
      <div class="height-item">
        <label>Large (30px)</label>
        <core-progress [value]="60" variant="warning" height="30px" [showLabel]="true"></core-progress>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h3>9. Rounded Progress</h3>
    <p>Progress bar with rounded corners</p>
    <core-progress [value]="75" variant="info" [rounded]="true" [showLabel]="true">
    </core-progress>
  </div>

  <div class="demo-section">
    <h3>10. Multi Progress</h3>
    <p>Multiple separate progress bars</p>
    @for (item of multiProgress; track $index) {
    <div class="multi-item">
      <label>{{ item.label }} ({{ item.value }}%)</label>
      <core-progress [value]="item.value" [variant]="item.variant || 'primary'" [showLabel]="true">
      </core-progress>
      <input type="range" [value]="item.value" (input)="updateMultiProgress($index, +($any($event.target)).value)"
        min="0" max="100" class="slider">
    </div>
    }
  </div>

  <div class="demo-section">
    <h3>11. Stacked Progress</h3>
    <p>Multiple progress bars stacked in one container</p>
    <core-progress [multi]="stackedProgress" [stacked]="true" [showLabel]="true">
    </core-progress>
    <div class="demo-controls">
      @for (item of stackedProgress; track $index) {
      <div class="control-group">
        <label>Bar {{ $index + 1 }}:</label>
        <input type="range" [value]="item.value" (input)="updateStackedProgress($index, +($any($event.target)).value)"
          min="0" max="100" class="slider">
        <span>{{ item.value }}%</span>
      </div>
      }
    </div>
  </div>

  <div class="demo-section">
    <h3>12. Dynamic Progress with Events</h3>
    <p>Progress bar with all event handlers</p>
    <core-progress [value]="dynamicProgress()" variant="primary" [striped]="true" [animated]="isRunning()"
      [showLabel]="true" (valueChange)="onValueChange($event)" (completed)="onCompleted()" (started)="onStarted()"
      (mouseEnter)="onMouseEnter($event)" (mouseLeave)="onMouseLeave($event)" (clicked)="onProgressClick($event)">
    </core-progress>
    <div class="demo-controls">
      <core-button variant="success" size="sm" [disabled]="isRunning()" (clicked)="startDynamicProgress()">
        Start
      </core-button>
      <core-button variant="danger" size="sm" [disabled]="!isRunning()" (clicked)="stopDynamicProgress()">
        Stop
      </core-button>
      <core-button variant="secondary" size="sm" (clicked)="resetDynamicProgress()">
        Reset
      </core-button>
      <span class="value-display">{{ dynamicProgress() }}%</span>
    </div>
  </div>

  <!-- Event Log Panel -->
  <div class="row g-3 mt-4">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-body d-flex flex-column">
          <h2 class="h6 text-uppercase text-muted mb-3">Event Log</h2>
          <div class="event-log flex-grow-1">
            @if (!eventLog.length) {
            <div class="text-muted small">
              No events yet. Interact with progress bars to see events here.
            </div>
            }
            @if (eventLog.length) {
            <ul class="list-unstyled mb-0 small">
              @for (entry of eventLog; track entry.timestamp.getTime()) {
              <li class="mb-2 pb-2 border-bottom">
                <div class="fw-semibold">
                  {{ eventTypeLabel[entry.type] }}
                  @if (entry.value !== undefined) {
                  <span class="text-muted">• {{ entry.value }}%</span>
                  }
                </div>
                <div class="text-body-secondary">
                  {{ entry.timestamp | date: 'mediumTime' }}
                  @if (entry.message) {
                  — <span>{{ entry.message }}</span>
                  }
                </div>
              </li>
              }
            </ul>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
